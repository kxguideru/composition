<h3>Создание студии <small>(Claudia)</small></h3>

<p>Будет использоваться менеджер Claudia, который позволяет соединять несколько программ в сохраняемых проектах. Claudia можно запустить из вкладки Tools в Cadence, а саму программу Cadence после этого закрыть. Большая часть работы ляжет на DAW Ardour, но помимо него будут использоваться и некоторые другие программы, которые, как и связи между ними, желательно запоминать для последующих запусков.</p>
<img src="images/claudia-music-studio.png" />

<p>Итак, откроем Claudia и создадим новую студию под названием Музыка. Добавим две комнаты: основную с названием Пульт и дополнительную с названием Эксперименты, для обеих используем шаблон Basic. В первой будет развиваться чистовой проект, а во второй можено будет создавать звуковые эффекты, паттернов и прочее с последующей записью результата в DAW основной комнаты. После создания комнат запустим студию. Перезапустить мост ALSA MIDI можно из меню Tools.</p>

<p>Теперь комнаты надо соединить, на следующем рисунке виден принцип подключения входов-выходов нашей студии:</p>
<img src="images/claudia-routes.png" />
<ul>
    <li>рабочий звуковой выход основной комнаты подключен к выходу звуковой карты (Left к playback_1, Right к playback_2);</li>
    <li>рабочий звуковой выход дополнительной комнаты подключен к входам основной комнаты, чтобы звуковые результаты экспериментов записывать на дорожки DAW;</li>
    <li>мониторные аудиовыходы обеих комнат подключены к выходу звуковой карты;</li>
    <li>выход аппаратного MIDI-контроллера "USB2.0-MIDI" подключен к MIDI-входам комнат (если у вас нет MIDI-клавиатуры, можно использовать виртуальную - JACK Keyboard или vmpk);</li>
    <li>MIDI-выход из основной комнаты направлен в дополнительную, а из дополнительной - в основную.</li>
</ul>

<p>Последнее сделано, чтобы, если понадобится, управлять дополнительной комнатой из основной по MIDI, а также записывать экспериментальные MIDI-данные в основной комнате. Сохраним созданную студию. Впоследствии можно добавлять или удалять комнаты, менять связи между ними, все правки будут сохраняться с сохранением студии.</p>

<p>Claudia хранит данные в файлах проектов, и проекты можно загружать в комнаты студии. В файловом менеджере создадим папки для файлов сессии. Пусть корневой папкой, в которой хранятся все наши данные будет путь <code>Audio/Composition</code> относительно домашней директории. Для каждого проекта потребуется отдельная дочерняя папка, для начала создадим две: <code>Main</code> и <code>Experiments</code>.</p>

<p class="bs-callout bs-callout-warning">Все пути файлов лучше писать латиницей и без пробелов.</p>

<p>Перейдём в основную комнату, выбрав "Пульт" из списка слева и создадим новый проект для этой комнаты (Project-&gt;New Project). Укажем полный путь к папке проекта (<code>/home/%username%/Audio/Composition/Main</code>), название - Основной проект. Проект можно периодически сохранять (Ctrl+S) - после добавления новых программ или изменения соединений.</p>

<p>Наконец, запустим несколько программ. За основу нашей студии возьмём DAW Ardour версии 4. Для запуска Ardour в проекте:</p>
<img src="images/claudia-ardour.png" />

<ol>
    <li>Нажимаем F2 и вводим команду <code>ardour4 Composition</code> ("Composition" - это имя сессии Ardour, которая будет сохранена в отдельной подпапке проекта).</li>
    <li>Вводим название <code>Ardour</code>, выбираем <code>Level 0</code>. Другие уровни в Ardour не работают, а нулевой означает, что сессии в самом Ardour придётся сохранять вручную. Некоторые программы, поддерживающие уровень 1 и выше, будут автоматически сохранять свои настройки при сохранении проекта в Claudia.</li>
</ol>

<p>При первом запуске Ardour сообщит, что такой сессии ещё не существует, поэтому нужно её создать:</p>
<img src="images/ardour-new-session.png" />

<ol>
    <li>Нажать на большую кнопку <strong>Создать сессию</strong> в появившемся окне настройки сессии.</li>
    <li>Удалить и заново написать слово "Composition" в поле имени сессии.</li>
    <li>В дополнительных параметрах нужно отключить автоматическое подключение к выходам и шинам, мы будем это делать вручную.</li>
    <li>Сессия будет создана нажатием кнопки Открыть, после чего нужно дождаться загрузки DAW, которая происходит довольно долго.</li>
    <li>Теперь можно вернуться в Claudia и сохранить проект.</li>
</ol>

<p>Функции редактирования MIDI хоть и присутствуют в Ardour, но являются довольно неудобными, особенно при введении нот мышкой. К счастью, для Linux существует классический, хорошо известный секвенсор MusE, который можно использовать при записи MIDI-партий. С другой стороны, хоть в MusE и есть возможности DAW, но они менее продвинутые, чем в Ardour. Поэтому связка MusE+Ardour выглядит оптимальной. Попробуем использовать MusE, как вспомогательный инструмент в экспериментальной комнате, а его выход MIDI записывать на дорожки Ardour.</p>

<p>Итак, выберем комнату Эксперименты в Claudia, создадим проект "Дополнительный проект" (путь <code>/home/%username%/Audio/Composition/Experiments</code>), и, нажав F2, добавим приложение MusE. И снова, Composition здесь означает имя файла секвенсора (сохранится как Composition.med). Вообще, теоретически MusE должен поддерживает Level 2 (LASH), но, похоже, версия в KXStudio собрана без этой поддержки, так что выбираем безопасный уровень 0.</p>
<img src="images/claudia-muse.png" />

<p>Теперь в MusE создадим два порта JACK MIDI, один для входа, другой для выхода. В меню выбираем Настройки-&gt;MIDI-порты/Прогр. синтезаторы. Затем в появившемся диалоговом окне:</p>
<img src="images/muse-midi-create.png" />

<ol>
    <li>Для порта номер 1 нажимаем на стрелку вниз в столбце Имя устройства (рядом с &lt;ничего&gt;). Появится пункт меню, предлагающий создать JACK-устройство, используем его.</li>
    <li>Переименовываем jack-midi-0 в jack-out и отключаем вход (метка в столбце Вх).</li>
    <li>Для порта номер 2 создаём ещё одно JACK-устройство.</li>
    <li>Переименовываем в jack-in и отключаем выход (метка в столбце Вых).</li>
    <li>Сохраняем настройки, нажав OK.</li>
</ol>
<img src="images/muse-midi-create-complete.png" />

<p>В комнате Эксперименты подключим вход и выход MIDI, как показано на картинке, и сохраним проект.</p>
<img src="images/claudia-muse-route.png" />
