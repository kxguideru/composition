<h3>Аккомпанемент <small>(QMidiArp)</small></h3>

<h4>Общие сведения</h4>

<p>Под аккомпанементом здесь понимаются партии, которые исполняют ритмические и гармонические рисунки на фоне лидирующей партии. В ритме они дополняют ударные, а в гармонии - подклад, связывая всё в единое целое, создавая звуковую платформу для лида. Можно пускать одновременно несколько совершенно разных партий аккомпанемента. Если удастся заставить их хорошо звучать совместно, это придаст композиции яркость, насыщенность, красоту. Мелодически партии аккомпанемента не должны быть слишком сложными, поэтому зачастую для них используются арпеджиаторы и простые повторяющиеся последовательности.</p>

<p>В электронной музыке, особенно танцевальной, часто вообще не бывает какой-то конкретной мелодии, а гармоническая структура композиции весьма условна (статичный бас). Из-за этого лид не может сыграть ничего выделяющегося и растворяется в аккомпанементе. И наоборот, партия аккомпанемента может взять на себя функциональную роль лида, т.е. арпеджиатор или секвенция аккомпанемента запросто может оказаться солирующей партией.</p>

<h4>Пошаговый секвенсор</h4>

<p>Создадим три MIDI-дорожки <em>Акк. MIDI</em> с инструментом-заглушкой Reasonable Synth, по ходу добавив для них группу <em>Аккомпанемент</em>. В окне микшера аудио-выходы от них подключим к имеющейся шине <strong>Аккомпанемент</strong> через матрицу маршрутизации (со входа шины). MIDI-входы, как обычно, в Claudia подключаем к входам комнаты. Две нижние дорожки пока заглушим кнопкой <strong>М</strong> на заголовке, а на первой перед <strong>Reasonable Synth</strong> добавим фильтр MIDI-каналов (разрешаем только четвёртый канал). В контекстном меню дорожки <strong>Выбор каналов</strong> сразу выбираем четвёртый канал. Включим мониторинг входа кнопкой на линейке микшера.</p>
<img src="images/ardour-create-acc.png" />
<img src="images/ardour-acc-route.png" />
<img src="images/ardour-acc-midi.png" />
<img src="images/ardour-acc-channel.png" />

<p>Переименуем дорожку в <em>Секвенция MIDI</em>, это можно сделать из контекстного меню по клику на названии в линейке микшера. С выбором тембра пока повременим. Вместо этого добавим после фильтра каналов плагин <strong>QMidiArp Seq</strong> (категория <strong>Instrument</strong>). В интерфейсе плагина выбираем входной канал 4. Канал выхода не пойдёт дальше синтезатора ниже, так что можно оставить первый. Плагин представляет собой отличный монофонический пошаговый секвенсор, в котором есть всё необходимое для создания линии аккомпанемента.</p>
<img src="images/ardour-acc-qmidiseq.png" />

<p>Нажав переключатель записи, можно записать последовательность с MIDI-клавиатуры. Если включен переключатель Note (а его лучше оставить включенным), то ноты вводить лучше в строе С. Вся секвенция при воспроизведении будет транспонироваться в соответствии с нажатой на клавиатуре ноте. Паузы делаются правым щелчком на ноте.</p>

<p>Включим петлю, нажмём на MIDI-клавиатуре "ля" (4-й канал) и попробуем создать рисунок, который перекликался бы с ударниками и басом. Не сильно мелодичный, чтобы его можно было играть хотя бы на тонике и доминанте. Длину ноты (параметр <strong>Note Length</strong>) подберём небольшую, чтобы последовательность играла стоккато. Пресет для Ardour можно скачать <a href="presets/qmidiarp-sequence.zip">здесь</a>. Скопировать в ~/.lv2/ и перезапустить Ardour.</p>
<img src="images/ardour-acc-qmidiseq-pattern.png" />

<p>Теперь попытаемся найти правильный тембр для этой секвенции: удаляем Reasonable Synth, пробуем разные синтезаторы и патчи. На этом этапе намного чаще, чем можно предположить, возникает ситуация, когда ничего подходящего найти не удаётся. Перепробовав десяток синтезаторов и тысячи программ к ним, - не по одному разу, - пытаясь модифицировать их, затратив, порой, несколько дней на всё это, в итоге заканчиваешь тем, что создаёшь свой звук в каком-нибудь синтезаторе практически с нуля. Предустановки могут звучать волшебно, пока играют сами по себе, а стоит включить композицию на их фоне - вся красота пропадает, тембр никак не удаётся втиснуть в звуковую систему координат композиции. Но в переборе звуков есть свои плюсы: можно расслышать особенности и ознакомиться с возможностями синтезаторов.</p>

<p>Для первой ритмической секвенции будем использовать Obxd, эмулятор Oberheim OB-X/Xa8. В KXStudio он без фабричных пресетов, несколько можно скачать <a href="presets/obxd-presets.zip">здесь</a> (тоже распаковать в папку ~/.lv2). Архив включает и наш новый патч (называется Sequence). Процесс создания патчей к синтезаторам - отдельная большая тема за рамками этого гайда. Только одно практическое замечание: секвенции и арпеджио часто звучат скучновато, поэтому можно приукрасить эти партии медленной трансформацией тембра. Это может быть плагин обработки - фейзер, фланжер, внешний фильтр, а может быть модуляция при помощи LFO на низких значениях в самом синтезаторе. Это потом хорошо звучит с длинной задержкой. Можно также автоматизировать эти параметры на дорожке Ardour.</p>
<img src="images/ardour-acc-obxd.png" />

<p>Самое приятное - секвенцией можно поиграть. Зациклим весь фрагмент и включим воспроизведение в Ardour. С текущими настройками по нажатию MIDI-клавиши секвенция транспонируется на соответствующую ноту, а также реагирует на скорость нажатия. Причём, если смена ноты происходит где-нибудь в середине секвенции, она не перезапускается, на новую высоту транспонируются недоигранные ноты. Для этого должна быть отключена кнопка с буквой <strong>D</strong> (Defer mode), иначе паттерн всегда будет доигрываться до конца перед сменой ноты.</p>

<p>Клавишу можно не зажимать, и это очень удобно при игре вживую - можно отвлекаться, пока инструмент играет. Но придётся автоматизировать кнопку Mute, иначе QMidiArp Seq будет всё время включаться при воспроизведении. Добавим трек автоматизации обработчика, как показано на рисунке.</p>
<img src="images/ardour-acc-qmidiseq-mute-automation.png" />

<p>Переключим состояние на <strong>Проигрывание</strong> и карандашом нарисуем переключения параметра. Начинается он с позиции 1 (включено), а за одну восьмую до цифры переходит в значение 0 (отключено). Получается небольшое вступление. Оканчиваем (возвращаем значение 1) ровно на конце последнего такта.</p>
<img src="images/ardour-acc-qmidiseq-mute-start.png" />

<p>Теперь сразу запишем партию с MIDI-клавиатуры, MusE на этот раз не используем. Перед отключением параметра Mute играем нижнее ля, чтобы секвенция запустилась на правильной ноте. Отквантуем по 1/8 (Доли/2). Почти ноты сыграны за 1/8 до начала такта (или второй половины такта в местах где такт делится). Исключение - ноты вступления перед 2-м и 18-м тактами, которые сыграны за 1/4 до такта.</p>
<img src="images/ardour-acc-qmidiseq-quantize.png" />
<img src="images/ardour-acc-roll.png" />

<p>Промежуточный рендер:</p>
<a href="audio/sequence.mp3">Секвенция</a>